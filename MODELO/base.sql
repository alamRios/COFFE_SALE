-- MySQL Script generated by MySQL Workbench
-- 05/09/17 11:41:18
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema COFFE_SALE
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema COFFE_SALE
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `COFFE_SALE` DEFAULT CHARACTER SET utf8 COLLATE utf8_spanish_ci ;
USE `COFFE_SALE` ;

-- -----------------------------------------------------
-- Table `COFFE_SALE`.`DIRECCION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `COFFE_SALE`.`DIRECCION` (
  `DIRECCION_ID` INT NOT NULL AUTO_INCREMENT,
  `DIRECCION_CALLE` VARCHAR(45) NULL,
  `DIRECCION_NUMERO` VARCHAR(45) NULL,
  `DIRECCION_COLONIA` VARCHAR(45) NULL,
  `DIRECCION_DELEGACION` VARCHAR(45) NULL,
  `DIRECCION_CIUDAD` VARCHAR(45) NULL,
  `DIRECCION_PAIS` VARCHAR(45) NULL,
  PRIMARY KEY (`DIRECCION_ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `COFFE_SALE`.`MARCA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `COFFE_SALE`.`MARCA` (
  `MARCA_ID` INT NOT NULL AUTO_INCREMENT,
  `MARCA_NOMBRE` VARCHAR(45) NULL,
  `MARCA_RFC` VARCHAR(45) NULL,
  PRIMARY KEY (`MARCA_ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `COFFE_SALE`.`CAFETERIA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `COFFE_SALE`.`CAFETERIA` (
  `CAFETERIA_ID` INT NOT NULL AUTO_INCREMENT,
  `CAFETERIA_NOMBRE` VARCHAR(45) NULL,
  `CAFETERIA_ACEPTA_MEMBRESIAS` TINYINT(1) NULL,
  `CAFETERIA_ESTADO` VARCHAR(45) NULL,
  `CAFETERIA_EMAIL` VARCHAR(45) NULL,
  `CAFETERIA_DIRECCION` INT NULL,
  `CAFETERIA_MARCA` INT NULL,
  PRIMARY KEY (`CAFETERIA_ID`),
  INDEX `DIRECCION_idx` (`CAFETERIA_DIRECCION` ASC),
  INDEX `MARCA_idx` (`CAFETERIA_MARCA` ASC),
  CONSTRAINT `DIRECCION`
    FOREIGN KEY (`CAFETERIA_DIRECCION`)
    REFERENCES `COFFE_SALE`.`DIRECCION` (`DIRECCION_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `MARCA`
    FOREIGN KEY (`CAFETERIA_MARCA`)
    REFERENCES `COFFE_SALE`.`MARCA` (`MARCA_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `COFFE_SALE`.`PLANTILLA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `COFFE_SALE`.`PLANTILLA` (
  `PLANTILLA_ID` INT NOT NULL AUTO_INCREMENT,
  `PLANTILLA_NoEMPLEADOS` INT NULL,
  `PLANTILLA_CAFETERIA` INT NULL,
  PRIMARY KEY (`PLANTILLA_ID`),
  INDEX `CAFETERIA_idx` (`PLANTILLA_CAFETERIA` ASC),
  CONSTRAINT `CAFETERIA`
    FOREIGN KEY (`PLANTILLA_CAFETERIA`)
    REFERENCES `COFFE_SALE`.`CAFETERIA` (`CAFETERIA_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `COFFE_SALE`.`PUESTO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `COFFE_SALE`.`PUESTO` (
  `PUESTO_ID` INT NOT NULL AUTO_INCREMENT,
  `PUESTO_NOMBRE` VARCHAR(45) NULL,
  PRIMARY KEY (`PUESTO_ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `COFFE_SALE`.`HORARIO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `COFFE_SALE`.`HORARIO` (
  `HORARIO_ID` INT NOT NULL,
  `HORARIO_DESCRIPCION` VARCHAR(45) NULL,
  `HORARIO_ENTRADA` TIME NULL,
  `HORARIO_SALIDA` TIME NULL,
  `HORARIO_ENTRADA_COMIDA` TIME NULL,
  `HORARIO_SALIDA_COMIDA` TIME NULL,
  PRIMARY KEY (`HORARIO_ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `COFFE_SALE`.`EMPLEADO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `COFFE_SALE`.`EMPLEADO` (
  `EMPLEADO_ID` INT NOT NULL AUTO_INCREMENT,
  `EMPLEADO_PUESTO` INT NULL,
  `EMPLEADO_HORARIO` INT NULL,
  `EMPLEADO_CORREO` VARCHAR(45) NULL,
  `EMPLEADO_NOMBRE` VARCHAR(45) NULL,
  `EMPLEADO_APPAT` VARCHAR(45) NULL,
  `EMPLEADO_APMAT` VARCHAR(45) NULL,
  `EMPLEADO_CONTRATACION` DATETIME NULL,
  `EMPLEADO_SALARIO` FLOAT NULL,
  PRIMARY KEY (`EMPLEADO_ID`),
  INDEX `PUESTO_idx` (`EMPLEADO_PUESTO` ASC),
  INDEX `HORARIO_idx` (`EMPLEADO_HORARIO` ASC),
  CONSTRAINT `PUESTO`
    FOREIGN KEY (`EMPLEADO_PUESTO`)
    REFERENCES `COFFE_SALE`.`PUESTO` (`PUESTO_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `HORARIO`
    FOREIGN KEY (`EMPLEADO_HORARIO`)
    REFERENCES `COFFE_SALE`.`HORARIO` (`HORARIO_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `COFFE_SALE`.`TAREA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `COFFE_SALE`.`TAREA` (
  `TAREA_ID` INT NOT NULL AUTO_INCREMENT,
  `TAREA_CAFETERIA` INT NULL,
  `TAREA_EMPLEADO` INT NULL,
  `TAREA_DESCRIPCION` VARCHAR(45) NULL,
  `TAREA_TITULO` VARCHAR(45) NULL,
  PRIMARY KEY (`TAREA_ID`),
  INDEX `CAFETERIA_idx` (`TAREA_CAFETERIA` ASC),
  INDEX `EMPLEADO_idx` (`TAREA_EMPLEADO` ASC),
  CONSTRAINT `CAFETERIA`
    FOREIGN KEY (`TAREA_CAFETERIA`)
    REFERENCES `COFFE_SALE`.`CAFETERIA` (`CAFETERIA_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `EMPLEADO`
    FOREIGN KEY (`TAREA_EMPLEADO`)
    REFERENCES `COFFE_SALE`.`EMPLEADO` (`EMPLEADO_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `COFFE_SALE`.`REPORTE_FALLO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `COFFE_SALE`.`REPORTE_FALLO` (
  `REPORTE_FALLO_ID` INT NOT NULL AUTO_INCREMENT,
  `REPORTE_FALLO_CAFETERIA` INT NULL,
  `REPORTE_FALLO_DESCRIPCION` VARCHAR(45) NULL,
  `REPORTE_FALLO_EMPLEADO` INT NULL,
  `REPORTE_FALLO_ALTA` DATETIME NULL,
  `REPORTE_FALLO_ATENCION` DATETIME NULL,
  `REPORTE_FALLO_SOLUCIONADO` TINYINT(1) NULL,
  PRIMARY KEY (`REPORTE_FALLO_ID`),
  INDEX `CAFETERIA_idx` (`REPORTE_FALLO_CAFETERIA` ASC),
  INDEX `EMPLEADO_idx` (`REPORTE_FALLO_EMPLEADO` ASC),
  CONSTRAINT `CAFETERIA`
    FOREIGN KEY (`REPORTE_FALLO_CAFETERIA`)
    REFERENCES `COFFE_SALE`.`CAFETERIA` (`CAFETERIA_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `EMPLEADO`
    FOREIGN KEY (`REPORTE_FALLO_EMPLEADO`)
    REFERENCES `COFFE_SALE`.`EMPLEADO` (`EMPLEADO_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `COFFE_SALE`.`GAVETA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `COFFE_SALE`.`GAVETA` (
  `GAVETA_ID` INT NOT NULL AUTO_INCREMENT,
  `GAVETA_CAFETERIA` INT NULL,
  `GAVETA_FONDO` FLOAT NULL,
  `GAVETA_CAPACIDAD` FLOAT NULL,
  PRIMARY KEY (`GAVETA_ID`),
  INDEX `CAFETERIA_idx` (`GAVETA_CAFETERIA` ASC),
  CONSTRAINT `CAFETERIA`
    FOREIGN KEY (`GAVETA_CAFETERIA`)
    REFERENCES `COFFE_SALE`.`CAFETERIA` (`CAFETERIA_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `COFFE_SALE`.`PERMISO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `COFFE_SALE`.`PERMISO` (
  `PERMISO_ID` INT NOT NULL AUTO_INCREMENT,
  `PERMISO_DESCRIPCION` VARCHAR(45) NULL,
  `PERMISO_EMPLEADO` INT NULL,
  PRIMARY KEY (`PERMISO_ID`),
  INDEX `EMPLEADO_idx` (`PERMISO_EMPLEADO` ASC),
  CONSTRAINT `EMPLEADO`
    FOREIGN KEY (`PERMISO_EMPLEADO`)
    REFERENCES `COFFE_SALE`.`EMPLEADO` (`EMPLEADO_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `COFFE_SALE`.`HABITACION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `COFFE_SALE`.`HABITACION` (
  `HABITACION_ID` INT NOT NULL AUTO_INCREMENT,
  `HABITACION_DESCRIPCION` VARCHAR(45) NULL,
  `HABITACION_USO` VARCHAR(45) NULL,
  `HABITACION_TAMANO_ANCHO` FLOAT NULL,
  `HABITACION_TAMANO_LARGO` FLOAT NULL,
  `HABITACION_CAFETERIA` INT NULL,
  PRIMARY KEY (`HABITACION_ID`),
  INDEX `CAFETERIA_idx` (`HABITACION_CAFETERIA` ASC),
  CONSTRAINT `CAFETERIA`
    FOREIGN KEY (`HABITACION_CAFETERIA`)
    REFERENCES `COFFE_SALE`.`CAFETERIA` (`CAFETERIA_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `COFFE_SALE`.`CLIENTE`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `COFFE_SALE`.`CLIENTE` (
  `CLIENTE_ID` INT NOT NULL AUTO_INCREMENT,
  `CLIENTE_NOMBRE` VARCHAR(45) NULL,
  `CLIENTE_APPAT` VARCHAR(45) NULL,
  `CLIENTE_APMAT` VARCHAR(45) NULL,
  `CLIENTE_EMAIL` VARCHAR(45) NULL,
  `CLIENTE_CAFETERIA` INT NULL,
  `CLIENTE_FECHA_ALTA` DATETIME NULL,
  `CLIENTE_ACTIVO` TINYINT(1) NULL,
  PRIMARY KEY (`CLIENTE_ID`),
  INDEX `CAFETERIA_idx` (`CLIENTE_CAFETERIA` ASC),
  CONSTRAINT `CAFETERIA`
    FOREIGN KEY (`CLIENTE_CAFETERIA`)
    REFERENCES `COFFE_SALE`.`CAFETERIA` (`CAFETERIA_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `COFFE_SALE`.`PROMOCION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `COFFE_SALE`.`PROMOCION` (
  `PROMOCION_ID` INT NOT NULL AUTO_INCREMENT,
  `PROMOCION_DESCRIPCION` VARCHAR(45) NULL,
  `PROMOCION_PORCENTAJE` FLOAT NULL,
  `PROMOCION_CODIGO` VARCHAR(45) NULL,
  PRIMARY KEY (`PROMOCION_ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `COFFE_SALE`.`VENTA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `COFFE_SALE`.`VENTA` (
  `VENTA_ID` INT NOT NULL AUTO_INCREMENT,
  `VENTA_PROMOCION` INT NULL,
  `VENTA_CAFETERIA` INT NULL,
  `VENTA_EMPLEADO` INT NULL,
  `VENTA_CLIENTE` INT NULL,
  `VENTA_IMPORTE` FLOAT NULL,
  `VENTA_INICIO` DATETIME NULL,
  `VENTA_FIN` DATETIME NULL,
  PRIMARY KEY (`VENTA_ID`),
  INDEX `PROMOCION_idx` (`VENTA_PROMOCION` ASC),
  INDEX `EMPLEADO_idx` (`VENTA_EMPLEADO` ASC),
  INDEX `CAFETERIA_idx` (`VENTA_CAFETERIA` ASC),
  INDEX `CLIENTE_idx` (`VENTA_CLIENTE` ASC),
  CONSTRAINT `PROMOCION`
    FOREIGN KEY (`VENTA_PROMOCION`)
    REFERENCES `COFFE_SALE`.`PROMOCION` (`PROMOCION_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `EMPLEADO`
    FOREIGN KEY (`VENTA_EMPLEADO`)
    REFERENCES `COFFE_SALE`.`EMPLEADO` (`EMPLEADO_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `CAFETERIA`
    FOREIGN KEY (`VENTA_CAFETERIA`)
    REFERENCES `COFFE_SALE`.`CAFETERIA` (`CAFETERIA_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `CLIENTE`
    FOREIGN KEY (`VENTA_CLIENTE`)
    REFERENCES `COFFE_SALE`.`CLIENTE` (`CLIENTE_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `COFFE_SALE`.`PRODUCTO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `COFFE_SALE`.`PRODUCTO` (
  `PRODUCTO_ID` INT NOT NULL AUTO_INCREMENT,
  `PRODUCTO_NOMBRE` VARCHAR(45) NULL,
  `PRODUCTO_COSTO` FLOAT NULL,
  PRIMARY KEY (`PRODUCTO_ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `COFFE_SALE`.`INVENTARIO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `COFFE_SALE`.`INVENTARIO` (
  `INVENTARIO_ID` INT NOT NULL AUTO_INCREMENT,
  `INVENTARIO_CAFETERIA` INT NULL,
  `INVENTARIO_PRODUCTO` INT NULL,
  `INVENTARIO_CANTIDAD` INT NULL,
  `INVENTARIO_ULTIMA_ACTUALIZACION` DATETIME NULL,
  PRIMARY KEY (`INVENTARIO_ID`),
  INDEX `CAFETERIA_idx` (`INVENTARIO_CAFETERIA` ASC),
  INDEX `PRODUCTO_idx` (`INVENTARIO_PRODUCTO` ASC),
  CONSTRAINT `CAFETERIA`
    FOREIGN KEY (`INVENTARIO_CAFETERIA`)
    REFERENCES `COFFE_SALE`.`CAFETERIA` (`CAFETERIA_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `PRODUCTO`
    FOREIGN KEY (`INVENTARIO_PRODUCTO`)
    REFERENCES `COFFE_SALE`.`PRODUCTO` (`PRODUCTO_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `COFFE_SALE`.`USUARIO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `COFFE_SALE`.`USUARIO` (
  `USUARIO_ID` INT NOT NULL AUTO_INCREMENT,
  `USUARIO_PASSCODE` VARCHAR(45) NULL,
  `USUARIO_EMPLEADO` INT NULL,
  PRIMARY KEY (`USUARIO_ID`),
  INDEX `EMPLEADO_idx` (`USUARIO_EMPLEADO` ASC),
  CONSTRAINT `EMPLEADO`
    FOREIGN KEY (`USUARIO_EMPLEADO`)
    REFERENCES `COFFE_SALE`.`EMPLEADO` (`EMPLEADO_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `COFFE_SALE`.`DET_VENTA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `COFFE_SALE`.`DET_VENTA` (
  `DET_VENTA_ID` INT NOT NULL AUTO_INCREMENT,
  `DET_VENTA_VENTA` INT NULL,
  `DET_VENTA_PRODUCTO` INT NULL,
  `DET_VENTA_PRECIO_UNITARIO` DOUBLE NULL,
  PRIMARY KEY (`DET_VENTA_ID`),
  INDEX `VENTA_idx` (`DET_VENTA_VENTA` ASC),
  INDEX `PRODUCTO_idx` (`DET_VENTA_PRODUCTO` ASC),
  CONSTRAINT `VENTA`
    FOREIGN KEY (`DET_VENTA_VENTA`)
    REFERENCES `COFFE_SALE`.`VENTA` (`VENTA_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `PRODUCTO`
    FOREIGN KEY (`DET_VENTA_PRODUCTO`)
    REFERENCES `COFFE_SALE`.`PRODUCTO` (`PRODUCTO_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `COFFE_SALE`.`PLAZA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `COFFE_SALE`.`PLAZA` (
  `PLAZA_ID` INT NOT NULL AUTO_INCREMENT,
  `PLAZA_FOLIO` INT NULL,
  `PLAZA_EMPLEADO` INT NULL,
  `PLAZA_FECHA_ALTA` DATETIME NULL,
  `PLAZA_FECHA_ACTUALIZACION` DATETIME NULL,
  `PLAZA_ACTIVA` TINYINT(1) NULL,
  `PLAZA_PLANTILLA` INT NULL,
  PRIMARY KEY (`PLAZA_ID`),
  INDEX `PLANTILLA_idx` (`PLAZA_PLANTILLA` ASC),
  INDEX `EMPLEADO_idx` (`PLAZA_EMPLEADO` ASC),
  CONSTRAINT `PLANTILLA`
    FOREIGN KEY (`PLAZA_PLANTILLA`)
    REFERENCES `COFFE_SALE`.`PLANTILLA` (`PLANTILLA_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `EMPLEADO`
    FOREIGN KEY (`PLAZA_EMPLEADO`)
    REFERENCES `COFFE_SALE`.`EMPLEADO` (`EMPLEADO_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
